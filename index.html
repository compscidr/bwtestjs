<html>
<head>
  <title>JS BW Test</title>
</head>
<body>

<h1>JS Bandwidth Test</h1>
<p>Click the button to start the bandwidth test</p>
<button onClick="bwTest.start(); $('#dlstatus').text(''); $('#ulstatus').text('');">Start</button>
<button onClick="bwTest.stop()">Stop</button>
<br/>
<br/>
<div id="state"></div>
<div id="dlstatus"></div>
<div id="ulstatus"></div>
<div id="rttstatus"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous"></script>
<script src="bwtest.js"></script>

<script>
bwTest = new JSBWTest({
  testStateCallback: stateCallback,
  testFinishCallback: finishCallback,
  testDlCallback: downloadCallback,
  testUlCallback: uploadCallback,
  testRttCallback: rttCallback
});

function stateCallback(state) {
  $('#state').text(state);
}

function finishCallback(value) {

}

function downloadCallback(throughput, duration) {
  $('#dlstatus').text("dl " + throughput + "bps " + " " + (throughput / 1024 / 1024) + "Mbps " + duration + "s");
}

function uploadCallback(throughput, duration) {
  $('#ulstatus').text("ul " + throughput + "bps " + " " + (throughput / 1024 / 1024) + "Mbps " + duration + "s");
}

function rttCallback(rtt) {
  $('#rttstatus').text("rtt " + rtt + " ms");
}
</script>

</body>
</html>
